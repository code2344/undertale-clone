# Architecture & Workflow Diagrams

## System Architecture

### Desktop Version (Original)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      User's Computer                â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    Python Interpreter        â”‚  â”‚
â”‚  â”‚      (Native)                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    Pygame Library            â”‚  â”‚
â”‚  â”‚  (Native C Extensions)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Undertale Clone Game Code   â”‚  â”‚
â”‚  â”‚    - main.py                 â”‚  â”‚
â”‚  â”‚    - globals.py              â”‚  â”‚
â”‚  â”‚    - rooms.py                â”‚  â”‚
â”‚  â”‚    - frisk.py                â”‚  â”‚
â”‚  â”‚    - etc.                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Operating System           â”‚  â”‚
â”‚  â”‚   - Graphics (OpenGL/D3D)    â”‚  â”‚
â”‚  â”‚   - Audio (ALSA/DirectSound) â”‚  â”‚
â”‚  â”‚   - Input (Keyboard)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Browser Version (WebAssembly)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         User's Web Browser                           â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           HTML/CSS/JavaScript                 â”‚  â”‚
â”‚  â”‚  - Canvas element (640x480)                   â”‚  â”‚
â”‚  â”‚  - User interface                             â”‚  â”‚
â”‚  â”‚  - Loading screen                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      Pyodide/Emscripten Runtime              â”‚  â”‚
â”‚  â”‚  - Python 3.11 in WebAssembly                â”‚  â”‚
â”‚  â”‚  - Virtual file system (MEMFS)               â”‚  â”‚
â”‚  â”‚  - Browser API bridges                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Pygame-ce Library                     â”‚  â”‚
â”‚  â”‚  - Compiled to WebAssembly                    â”‚  â”‚
â”‚  â”‚  - Canvas rendering backend                   â”‚  â”‚
â”‚  â”‚  - Web Audio API bridge                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    Undertale Clone Game Code                  â”‚  â”‚
â”‚  â”‚      - main_web.py (async wrapper)            â”‚  â”‚
â”‚  â”‚      - main.py (original logic)               â”‚  â”‚
â”‚  â”‚      - All game modules                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        Browser Web APIs                       â”‚  â”‚
â”‚  â”‚  - Canvas 2D Context (Graphics)               â”‚  â”‚
â”‚  â”‚  - Web Audio API (Sound)                      â”‚  â”‚
â”‚  â”‚  - Keyboard Events (Input)                    â”‚  â”‚
â”‚  â”‚  - LocalStorage (Save files)                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Build Process Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Source Files   â”‚
â”‚  - *.py files   â”‚
â”‚  - Assets       â”‚
â”‚  - Config       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pygbag Tool    â”‚
â”‚  (Build Step)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                              â”‚
         â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Python Code    â”‚          â”‚  Asset Files    â”‚
â”‚  Compilation    â”‚          â”‚  Bundling       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                            â”‚
         â–¼                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  Emscripten     â”‚                   â”‚
â”‚  Compiler       â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
         â”‚                            â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Build Output   â”‚
â”‚  build/web/     â”‚
â”‚  - index.html   â”‚
â”‚  - *.wasm       â”‚
â”‚  - *.js         â”‚
â”‚  - assets.zip   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Deployment    â”‚
â”‚  (GitHub Pages) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Development Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Developer  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Edit code
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Source Files   â”‚
â”‚   (*.py, etc.)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. Run check
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ check_compatibility  â”‚
â”‚      .py             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. Pass? â”€â”€Noâ”€â”€â”
       â–¼                â”‚
      Yes               â”‚
       â”‚                â”‚
       â”‚ 4. Build       â”‚
       â–¼                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  build.sh    â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
       â”‚                â”‚
       â”‚ 5. Success?    â”‚
       â–¼                â”‚
      Yes               â”‚
       â”‚                â”‚
       â”‚ 6. Test        â”‚
       â–¼                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  Local       â”‚        â”‚
â”‚  Browser     â”‚        â”‚
â”‚  Testing     â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
       â”‚                â”‚
       â”‚ 7. Works?      â”‚
       â–¼                â”‚
      Yes               â”‚
       â”‚                â”‚
       â”‚ 8. Commit      â”‚
       â–¼                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  Git Push    â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
       â”‚                â”‚
       â”‚ 9. Auto-deploy â”‚
       â–¼                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  GitHub      â”‚        â”‚
â”‚  Actions     â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
       â”‚                â”‚
       â”‚ 10. Deploy     â”‚
       â–¼                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  GitHub      â”‚        â”‚
â”‚  Pages       â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
       â”‚                â”‚
       â””â”€â”€â”€â”€<Fixâ”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## CI/CD Pipeline (GitHub Actions)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Git Push      â”‚
â”‚  (master/main)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Actions â”‚
â”‚   Triggered     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€ Step 1: Checkout Code
         â”‚
         â”œâ”€â”€â”€â”€ Step 2: Setup Python 3.11
         â”‚
         â”œâ”€â”€â”€â”€ Step 3: Install Pygbag
         â”‚
         â”œâ”€â”€â”€â”€ Step 4: Run Compatibility Check
         â”‚             â””â”€> check_compatibility.py
         â”‚
         â”œâ”€â”€â”€â”€ Step 5: Build WebAssembly
         â”‚             â””â”€> pygbag --build
         â”‚
         â”œâ”€â”€â”€â”€ Step 6: Verify Build
         â”‚             â””â”€> ls build/web/
         â”‚
         â”œâ”€â”€â”€â”€ Step 7: Upload Artifact
         â”‚             â””â”€> build/web/
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Deploy Job     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€ Step 8: Deploy to Pages
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Live Website   â”‚
â”‚  GitHub Pages   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Users Play     â”‚
â”‚   in Browser    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Organization

```
undertale-clone/
â”‚
â”œâ”€â”€ ğŸ“„ Core Game Files
â”‚   â”œâ”€â”€ main.py              # Original desktop entry
â”‚   â”œâ”€â”€ main_web.py          # WebAssembly wrapper
â”‚   â”œâ”€â”€ globals.py           # Game globals
â”‚   â”œâ”€â”€ frisk.py             # Player character
â”‚   â”œâ”€â”€ rooms.py             # Game rooms
â”‚   â”œâ”€â”€ draw.py              # Rendering
â”‚   â”œâ”€â”€ input.py             # Input handling
â”‚   â””â”€â”€ ...                  # Other game modules
â”‚
â”œâ”€â”€ ğŸ¨ Assets
â”‚   â”œâ”€â”€ sprites/             # Graphics
â”‚   â”œâ”€â”€ fonts/               # Fonts
â”‚   â”œâ”€â”€ mus/                 # Music
â”‚   â””â”€â”€ sfx/                 # Sound effects
â”‚
â”œâ”€â”€ ğŸ”§ Build & Config
â”‚   â”œâ”€â”€ build.sh             # Build script
â”‚   â”œâ”€â”€ pygbag.toml          # Build config
â”‚   â”œâ”€â”€ requirements.txt     # Python deps
â”‚   â”œâ”€â”€ .gitignore          # Git config
â”‚   â””â”€â”€ __init__.py          # Package metadata
â”‚
â”œâ”€â”€ ğŸ“– Documentation
â”‚   â”œâ”€â”€ README.md            # Main readme
â”‚   â”œâ”€â”€ BROWSER_BUILD.md     # Build guide
â”‚   â”œâ”€â”€ WASM_NOTES.md        # Technical notes
â”‚   â”œâ”€â”€ QUICKSTART.md        # Quick guide
â”‚   â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md
â”‚   â””â”€â”€ ARCHITECTURE.md      # This file
â”‚
â”œâ”€â”€ ğŸ§ª Testing & Development
â”‚   â”œâ”€â”€ check_compatibility.py
â”‚   â”œâ”€â”€ test.html
â”‚   â””â”€â”€ index.html
â”‚
â”œâ”€â”€ ğŸ¤– CI/CD
â”‚   â””â”€â”€ .github/
â”‚       â””â”€â”€ workflows/
â”‚           â””â”€â”€ deploy.yml   # GitHub Actions
â”‚
â””â”€â”€ ğŸ“¦ Build Output (generated)
    â””â”€â”€ build/
        â””â”€â”€ web/             # Deploy this!
            â”œâ”€â”€ index.html
            â”œâ”€â”€ pygame.js
            â”œâ”€â”€ python.wasm
            â””â”€â”€ ...
```

## Data Flow: Game Loop

### Desktop Version
```
User Input (Keyboard)
         â”‚
         â–¼
   Input Module
         â”‚
         â–¼
   Game Logic
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
Globals    Rooms
    â”‚         â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â–¼
    Draw Module
         â”‚
         â–¼
  Pygame Render
         â”‚
         â–¼
   Screen Output
```

### Browser Version (with Async)
```
User Input (Keyboard Events)
         â”‚
         â–¼
Browser Event Handler
         â”‚
         â–¼
   Input Module
         â”‚
         â–¼
   Game Logic (async)
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
Globals    Rooms
    â”‚         â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â–¼
    Draw Module
         â”‚
         â–¼
  Pygame-ce Render
         â”‚
         â–¼
 Canvas 2D Context
         â”‚
         â”œâ”€â”€> await asyncio.sleep(0)
         â”‚    (Yield to browser)
         â”‚
         â–¼
   Screen Output
```

## Save File Flow

### Desktop
```
Game State
    â”‚
    â–¼
Python File I/O
    â”‚
    â–¼
Operating System
    â”‚
    â–¼
Physical Disk
(file0, undertale.ini)
```

### Browser
```
Game State
    â”‚
    â–¼
Python File I/O
    â”‚
    â–¼
Emscripten MEMFS
(Virtual File System)
    â”‚
    â–¼
Browser IndexedDB
(LocalStorage backend)
    â”‚
    â–¼
Browser Storage
(Persistent, per-domain)
```

## Deployment Options Comparison

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Deployment Options                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  GitHub Pages   â”‚   Netlify     â”‚   Custom Server   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… Free        â”‚   âœ… Free     â”‚   âš ï¸ Paid          â”‚
â”‚  âœ… Auto-deploy â”‚   âœ… Auto     â”‚   âŒ Manual        â”‚
â”‚  âœ… HTTPS       â”‚   âœ… HTTPS    â”‚   âš ï¸ Configure     â”‚
â”‚  âš ï¸ GitHub only â”‚   âœ… Any Git  â”‚   âœ… Full control  â”‚
â”‚  âš ï¸ Public only â”‚   âœ… Private  â”‚   âœ… Private       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Legend

- ğŸ“„ = Source code files
- ğŸ¨ = Asset files
- ğŸ”§ = Configuration/build files
- ğŸ“– = Documentation
- ğŸ§ª = Testing/development files
- ğŸ¤– = Automation/CI/CD
- ğŸ“¦ = Generated/build outputs
- âœ… = Available/Supported
- âš ï¸ = Partial/Conditional
- âŒ = Not available

---

This architecture enables running a desktop Python/Pygame game in the browser with minimal code changes while maintaining full compatibility with the original version.
